<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>格闘ゲーム用タスク管理ツール</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <main class="app">
      <header class="app-header">
        <button id="menu-btn" class="menu-btn" type="button" aria-label="メニュー" aria-expanded="false">☰</button>
        <button id="list-switch-btn" class="list-switch-btn" type="button" aria-label="タスクリストを切り替え"></button>
        <div id="menu-popover" class="menu-popover is-hidden" role="menu" aria-label="データ管理メニュー">
          <button id="export-btn" class="menu-item-btn" type="button" role="menuitem">データをエクスポート</button>
          <button id="import-btn" class="menu-item-btn" type="button" role="menuitem">データをインポート</button>
          <div class="menu-divider" role="separator" aria-hidden="true"></div>
          <button id="share-publish-btn" class="menu-item-btn" type="button" role="menuitem">このタスクリストを公開（NextRound Combosに移動）</button>
          <button id="share-search-btn" class="menu-item-btn" type="button" role="menuitem">タスクリストを検索（NextRound Combosに移動）</button>
        </div>
      </header>

      <nav class="tabs" aria-label="タスク表示切替">
        <div class="tabs-main">
          <button id="tab-active" class="tab is-active" type="button" aria-selected="true">アクティブ</button>
          <button id="tab-done" class="tab" type="button" aria-selected="false">完了</button>
        </div>
        <div class="tabs-actions">
          <button
            id="selection-toggle-btn"
            class="selection-toggle-btn"
            type="button"
            aria-pressed="false"
            aria-label="タスク選択モード"
          >
            タスク選択
          </button>
          <button
            id="reorder-toggle-btn"
            class="reorder-toggle-btn"
            type="button"
            aria-pressed="false"
            aria-label="タスクの順序入れ替えモード"
          >
            順序入れ替え
          </button>
        </div>
      </nav>

      <p id="reorder-help" class="reorder-help is-hidden">順序入れ替え中です。タスクの右端ハンドルをドラッグしてください。</p>
      <p id="selection-help" class="selection-help is-hidden">選択モード中です。タスクを選択して移動またはコピーしてください。</p>

      <section id="panel-active" class="panel" aria-labelledby="tab-active">
        <ul id="active-list" class="task-list"></ul>
        <p id="active-empty" class="empty">タスクがありません。右下の + から追加しましょう。</p>
      </section>

      <section id="panel-done" class="panel is-hidden" aria-labelledby="tab-done">
        <ul id="done-list" class="task-list"></ul>
        <p id="done-empty" class="empty">完了タスクはありません。</p>
      </section>

      <footer class="app-footer" role="contentinfo" aria-label="共通フッター">
        <nav class="footer-links" aria-label="法務関連リンク">
          <a href="./terms/">利用規約</a>
          <a href="./privacy/">データの扱い</a>
        </nav>
      </footer>
    </main>

    <button id="fab-add" class="fab" type="button" aria-label="タスクを追加">＋</button>

    <div id="sheet-backdrop" class="sheet-backdrop is-hidden" aria-hidden="true"></div>
    <section id="add-sheet" class="add-sheet is-hidden" aria-label="タスク追加シート">
      <h2>タスクを追加</h2>
      <label for="sheet-task-title">タスク名</label>
      <input id="sheet-task-title" type="text" placeholder="例: ダウンが取れるコンボ10回" />
      <p id="sheet-task-error" class="error is-hidden" role="alert">タスク名を入力してください。</p>
      <div class="sheet-actions">
        <button id="sheet-cancel" type="button">キャンセル</button>
        <button id="sheet-submit" class="btn-primary" type="button">追加</button>
      </div>
    </section>

    <section
      id="list-sheet"
      class="add-sheet list-sheet-modal is-hidden"
      aria-label="タスクリスト管理モーダル"
      role="dialog"
      aria-modal="true"
      aria-labelledby="list-sheet-title"
    >
      <div class="list-sheet-header">
        <h2 id="list-sheet-title">タスクリスト管理</h2>
        <button id="list-sheet-close" type="button" aria-label="タスクリスト管理を閉じる">閉じる</button>
      </div>
      <label for="list-name-input">リスト名</label>
      <div class="list-create-row">
        <input id="list-name-input" type="text" placeholder="例: SF6 / リュウ" />
        <button id="list-create-btn" class="btn-primary" type="button">作成</button>
      </div>
      <p id="list-error" class="error is-hidden" role="alert">リスト名を入力してください。</p>
      <ul id="list-items" class="list-items"></ul>
    </section>

    <section
      id="bulk-sheet"
      class="add-sheet list-sheet-modal is-hidden"
      aria-label="タスク移動先選択モーダル"
      role="dialog"
      aria-modal="true"
      aria-labelledby="bulk-sheet-title"
    >
      <div class="list-sheet-header">
        <h2 id="bulk-sheet-title">移動先を選択</h2>
        <button id="bulk-sheet-close" type="button" aria-label="移動先選択を閉じる">閉じる</button>
      </div>
      <p id="bulk-sheet-description" class="bulk-sheet-description"></p>
      <ul id="bulk-destination-list" class="list-items"></ul>
    </section>

    <section id="selection-action-bar" class="selection-action-bar is-hidden" aria-label="選択タスク操作バー">
      <p id="selection-count" class="selection-count">0件選択中</p>
      <div class="selection-action-buttons">
        <button type="button" data-action="selection-select-all">全選択</button>
        <button type="button" data-action="selection-copy" class="btn-primary">コピー</button>
        <button type="button" data-action="selection-move" class="btn-primary">移動</button>
        <button type="button" data-action="selection-cancel">キャンセル</button>
      </div>
    </section>

    <div id="toast" class="toast is-hidden" role="status" aria-live="polite"></div>
    <p id="live-region" class="sr-only" aria-live="polite" aria-atomic="true"></p>
    <input id="import-file-input" type="file" accept="application/json,.json" class="sr-only" />

    <script src="./app-config.js"></script>
    <script type="module" src="./src/ui/app.js"></script>
  </body>
</html>
