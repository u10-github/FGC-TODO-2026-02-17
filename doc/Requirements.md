# 格闘ゲーム用タスク管理ツール 要件定義（MVP / 確定版）

## 1. 目的
格闘ゲームの練習課題（タスク）ごとに「成功回数」をカウントし、十分練習できたタスクを完了（非表示化）できるツールを提供する。

---

## 2. スコープ

### 2.1 Must（実装する）
1. タスク作成
2. タスクごとの成功回数カウント（増加のみ）
3. タスクごとの手動リセット（成功回数を0に戻す）
4. タスク完了（非表示化）
5. 完了タスクの復活（復活時にcountは保持）
6. 完了タスクの削除（確認後に永久削除）
7. タスクリスト作成（自由記述の1入力欄）
8. タスクリスト切替（リストごとにタスクを分離）
9. データのエクスポート（JSONバックアップ）
10. データのインポート（確認後の上書き復元）

### 2.2 Won’t（実装しない）
- タグ付け、検索、並び替え、複数リスト
- 共有（URL公開、インポート等）
- ログイン、クラウド同期、複数端末連携
- リマインド、タイマー、分析ダッシュボード
- 全体（日次）リセット、自動日付切替リセット
- 高度なセキュリティ対策（秘匿情報として扱わない）

---

## 3. 前提・制約（非機能）
- 実行環境：ブラウザ（静的ホスティング / GitHub Pages等を想定）
- 永続化：各ブラウザの localStorage に保存
- 認証：なし
- データ特性：端末/ブラウザ単位で保持。ブラウザデータ削除・別端末・別ブラウザでは引き継がれない。
- ブランチ運用：変更は `develop` で検証後に `main` へ反映する。
- 公開運用：GitHub Pages は `main` ブランチ公開固定とする。

---

## 4. 画面要件（最小構成）

### 4.1 画面A：アクティブタスク一覧
- 左上にハンバーガーメニュー（データ管理）を表示
- 右上に現在のタスクリスト名を表示し、切替UIを提供
- タスク追加（タスク名入力＋追加）
- アクティブタスクの一覧表示
- 各タスクに以下の操作/表示を持つ：
  - タスク名（title）
  - `成功！`（初回表示）/ `n回`（押下後表示）
  - `リセット`（成功回数を0に戻す）
  - `完了`（完了状態にする＝非表示化）

※ `-1`（減算）は提供しない。

### 4.2 画面B：完了タスク一覧
- 完了タスクの一覧表示
- 各タスクに以下の操作/表示を持つ：
  - タスク名（title）
  - `削除`（確認後に永久削除）
  - `復活`（アクティブに戻す）

### 4.3 タスクリスト管理UI
- 自由記述の1入力欄でタスクリストを作成できる
- 作成済みタスクリストを選択して切替できる
- リスト名の前後空白は除去して保存する
- 空文字は作成不可
- 同名タスクリストは作成不可

### 4.4 データ管理UI（ハンバーガーメニュー）
- メニュー項目は `データをエクスポート` と `データをインポート` の2つのみ
- `データをエクスポート` は JSON ファイルをダウンロードする
- `データをインポート` は JSON ファイルを選択後、確認ダイアログで上書き可否を確認する

---

## 5. データ要件（localStorage）

### 5.1 Taskモデル
- id: string（一意）
- title: string
- status: "active" | "done"
- count: number（0以上）
- listId: string（所属タスクリストID）

### 5.2 TaskListモデル
- id: string（一意）
- name: string（自由記述）
- createdAt: number（UNIX ms）

### 5.3 保存形式
- localStorage key（例）：`fg_task_manager_v1`
- value（JSON）：
  - schemaVersion: number（=2）
  - currentListId: string
  - lists: TaskList[]
  - tasks: Task[]

---

## 6. ユースケース / 受け入れ条件（Acceptance Criteria）

### UC1：タスク作成
- ユーザーがタスク名を入力して追加できる
- 追加直後は `status=active` かつ `count=0`

### UC2：成功回数カウント（増加のみ）
- `+1` 操作で対象タスクの `count` が 1 増える
- 減算操作は存在しない

### UC3：個別手動リセット
- `リセット` 操作で対象タスクの `count` が 0 になる
- 他のタスクには影響しない

### UC4：完了（非表示化）
- `完了` 操作で対象タスクの `status` が `done` になる
- アクティブ一覧から消え、完了一覧に表示される
- データは保持される（復活できるため）

### UC5：復活
- `復活` 操作で対象タスクの `status` が `active` になる
- アクティブ一覧に戻る
- 復活時に `count` は保持され、変更されない

### UC6：削除（永久削除）
- 完了タスクで `削除` 操作を押すと確認ダイアログが表示される
- 確認後、対象タスクはデータから削除される
- 削除されたタスクはリロード後も復元されない

### UC7：タスクリスト作成
- ユーザーは自由記述の1入力欄でタスクリストを作成できる
- 前後空白を除去した結果が空文字の場合は作成できない
- 既存と同名のタスクリストは作成できない
- 作成直後はそのタスクリストが選択状態になる

### UC8：タスクリスト切替
- 選択したタスクリストに対応するタスクのみ表示される
- 別タスクリストのタスクは表示されない
- リロード後も最後に選択したタスクリストが復元される

### UC9：データエクスポート
- ハンバーガーメニューから `データをエクスポート` を実行できる
- 現在の状態（lists/currentListId/tasks）を JSON として保存できる

### UC10：データインポート
- ハンバーガーメニューから `データをインポート` を実行できる
- ファイル選択後に「現在のデータを上書きする」確認ダイアログを表示する
- 確認後に有効な JSON を読み込むと状態が置き換わる
- 無効な JSON の場合は失敗を通知し、状態を変更しない

### 永続化（共通）
- ブラウザをリロードしても、タスク一覧・count・statusが保持される（localStorage）
